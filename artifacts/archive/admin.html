<!doctype html>
<html lang='en'>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <title>Admin — Waights Garden Care</title>
  <link rel='stylesheet' href='./assets/css/style.css'>
  <style>
    .admin-wrap{max-width:980px;margin:40px auto;padding:0 16px}
    .admin-grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:860px){.admin-grid{grid-template-columns: 360px 1fr}}
    .panel{background:#fff;border:1px solid var(--line);border-radius:14px;box-shadow:0 8px 24px rgba(0,0,0,.04);padding:16px}
    .panel h3{margin:.2rem 0 .6rem}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .row-1{display:grid;grid-template-columns:1fr;gap:10px}
    table{width:100%;border-collapse:collapse}
    th,td{border-bottom:1px solid #e9eee9;padding:8px 6px;text-align:left;font-size:.98rem}
    tr:hover{background:#fafdfa}
    .paid{color:#2E6E50;font-weight:700}
    .unpaid{color:#a33;font-weight:700}
    .actions button{margin-right:6px}
    .badge{background:#e9f5ec;color:var(--green-2);border:1px solid #d3e9d7;border-radius:999px;font-size:.85rem;padding:2px 8px}
    .danger{background:#ffecec;border:1px solid #ffd2d2;color:#a33}
    .small{font-size:.92rem;opacity:.85}
    .search-row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
  </style>
</head>
<body>
  <main class='admin-wrap'>
    <h1>Admin — Waights Garden Care</h1>
    <p class="small">Local, client-side dashboard. Tip: bookmark this page; don’t link it in the nav.</p>

    <div class="admin-grid">
      <section class="panel">
        <h3>Add / Edit Job</h3>
        <form id="jobForm" class="row">
          <input type="hidden" id="jobId">
          <label class="row-1"><span>Name</span><input id="name" required></label>
          <label class="row-1"><span>Address / Area</span><input id="address" required></label>
          <label><span>Date</span><input id="date" type="date" required></label>
          <label><span>Bundle</span>
            <select id="bundle" required>
              <option value="Quick Refresh">Quick Refresh (£25)</option>
              <option value="Garden Tidy">Garden Tidy (£45)</option>
              <option value="Seasonal Reset">Seasonal Reset (£65)</option>
            </select>
          </label>
          <label><span>Payment</span>
            <select id="payMethod">
              <option>Bank</option><option>Cash</option><option>PayPal</option>
            </select>
          </label>
          <label><span>Paid?</span>
            <select id="paid"><option>No</option><option>Yes</option></select>
          </label>
          <label class="row-1"><span>Notes</span><textarea id="notes" rows="3"></textarea></label>
          <div class="row-1"><button class="btn primary" type="submit">Save Job</button>
            <button class="btn" type="reset" id="resetBtn">Clear</button></div>
        </form>
      </section>

      <section class="panel">
        <div class="search-row">
          <input id="search" placeholder="Search name/address…" style="flex:1;min-width:180px">
          <select id="filterPaid">
            <option value="">All</option>
            <option value="Yes">Paid</option>
            <option value="No">Unpaid</option>
          </select>
          <select id="filterBundle">
            <option value="">Any bundle</option>
            <option>Quick Refresh</option>
            <option>Garden Tidy</option>
            <option>Seasonal Reset</option>
          </select> <button class="btn outline" id="exportCsv">Export CSV</button> <button class="btn" id="exportCsvClipboard">Copy CSV</button> <input type="file" id="importCsvFile" accept=".csv" style="display:none" /> <button class="btn" id="importCsv">Import CSV</button> <button class="btn outline" id="exportJson">Export JSON</button> <input type="file" id="importJsonFile" accept=".json" style="display:none" /> <button class="btn" id="importJson">Import JSON</button> <button class="btn outline" id="openSnapshots">Snapshots</button> <button class="btn outline" id="downloadTemplate">Template CSV</button>
          <button class="btn danger" id="wipeAll">Wipe All (local)</button> <button class="btn outline" id="markFilteredPaid">Mark filtered as Paid</button> <button class="btn outline" id="markFilteredUnpaid">Mark filtered as Unpaid</button>
        </div>
        <div style="margin-top:10px">
          <span class="badge" id="summaryCount">0 jobs</span>
          <span class="badge" id="summaryPaid">£0 paid</span>
          <span class="badge" id="summaryUnpaid">£0 unpaid</span>
        </div>
          <div id="bulkBar" class="bulkbar" style="display:none;margin:8px 0;gap:8px;align-items:center">
    <span class="small" id="bulkCount">0 selected</span>
    <button class="btn" id="bulkPaid">Mark selected Paid</button>
    <button class="btn" id="bulkUnpaid">Mark selected Unpaid</button>
    <button class="btn danger" id="bulkDelete">Delete selected</button>
    <span style="flex:1"></span>
    <button class="btn" id="printToday">Print today\u2019s jobs</button> <button class="btn outline" id="undoBtn" title="Undo last bulk action" disabled>Undo</button>
  </div>

          <table id="jobsTable">
            <thead>
              <tr><th><input type="checkbox" id="selAll" title="Select all"></th><th>Date</th><th>Name</th><th>Area</th><th>Bundle</th><th>£</th><th>Pay</th><th>Status</th><th>Actions</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
            <section class="panel" id="reportsPanel">
        <h3>Reports</h3>
        <div class="row-1">
          <div>
            <h4 style="margin:.2rem 0 .4rem">Income by Month</h4>
            <canvas id="chartIncome" width="800" height="260" aria-label="Bar chart: income by month"></canvas>
          </div>
          <div style="margin-top:14px">
            <h4 style="margin:.2rem 0 .4rem">Bundle Mix</h4>
            <canvas id="chartBundles" width="800" height="260" aria-label="Pie chart: bundle distribution"></canvas>
          </div>
        </div>
      </section>


  <script src="./assets/js/admin.js" defer></script>
</body>
</html>


















